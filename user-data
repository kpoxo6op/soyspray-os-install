#cloud-config
# Note: The network interface name `enp0s3` is guessed based on typical naming
# conventions. If the installation does not connect to the network, use direct
# console access to determine the correct network interface name and adjust it
# accordingly.

# password is 123
autoinstall:
  version: 1
  identity:
    hostname: k8s-node-1
    username: ubuntu
    password: "$6$/9uLuqz503PqQgKX$30GylSgOyQkUSy3Nu.gUkCfObp86N9usmMay72qs3tyTQGTrt/lwnAsAtZ4msDy6ZgthMowrIIia/0NcwFGwq0"
  ssh:
    install-server: true
    authorized-keys:
      - "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCr7WZBwguXRF8o+mVtM7iHyzR14nU8bFIQcScSFphYkNEyK3ThkauVEc3zZzGi6F1ZaBS1pDDIBIPO7nASB444jkJAw9rKbkKZYXdqB2B9vIAFCRT8/tnR+ckKtX57C2DlE9924+e6PiOyeZXNMBmqfb35PjszISOKWiZPw42k1yCAcaNnMSZTWp2/7h8yOMFogwhL7xjEGHizBwSqICA0upT39S9PQUiGhRvhjYUqejOUd5zuAd2+wkRgq4kU43alYZjCUPqBJOt4VUQaBi0Ex3vJaijmkYAJ+THU1TvkLZ4dCu4+UvFoKxODLLpFZMPXHJovnn2K2RYuibcMK4KB boris@borex-pc"
  network:
    version: 2
    ethernets:
      enp0s3:
        dhcp4: false
        addresses:
          - 192.168.1.101/24
        gateway4: 192.168.1.1
        nameservers:
          addresses:
            - 192.168.1.1
  packages:
    - python3
    - python3-pip
    - git
    - sshpass
  late-commands:
    - echo "ubuntu ALL=(ALL) NOPASSWD:ALL" >> /target/etc/sudoers
    - curtin in-target --target=/target -- apt-get update
    - curtin in-target --target=/target -- apt-get install -y python3-pip
